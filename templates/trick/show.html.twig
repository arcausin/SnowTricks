{% extends 'base.html.twig' %}

{% block title %}{{ trick.name }} - SnowTricks{% endblock %}

{% block body %}
<div class="container">
    <div class="row">
        <div class="col-12 offset-md-2 col-md-8">
            <div class="d-flex justify-content-between align-items-center py-3">
                <p class="text-white fs-1 mb-0">{{ trick.name }}</p>
    
                {% if app.user %}
                    <div class="d-flex justify-content-between">
                        <a href="{{ path('app_trick_edit', {'id': trick.id}) }}"><span class="badge text-bg-warning py-2 me-3 fs-6"><i class="fas fa-edit"></i></span></a>
        
                        {{ include('trick/_delete_form.html.twig') }}
                    </div>
                {% endif %}
            </div>

            <img class="shadow img-fluid" src="{{ asset('uploads/illustrations/' ~ trick.illustration) }}" alt="">
    
            <div class="p-3">
                <div class="text-white mb-3">
                    {{ trick.description }}
                </div>

                <div class="text-center text-white mb-3">
                    <span class="badge text-bg-light py-2 fs-6 mb-1"><i class="fas fa-snowboarding"></i> {{ trick.category }}</span>
                    <span class="badge text-bg-light py-2 fs-6 mb-1"><i class="fas fa-user"></i> {{ trick.user }}</span>
                    <span class="badge text-bg-light py-2 fs-6 mb-1"><i class="fas fa-calendar"></i> {{ trick.createdAt|date('d/m/Y') }}</span>
                </div>

                <hr>

                {% if app.user %}
                    {{ include('comment/_form.html.twig') }}
                <hr>
                {% endif %}

                <div id="commentSection"></div>

                {% if trick.comments|length != 0 %}
                    <h2 class="text-center mt-3 mb-3">List of comments</h2>

                    {% for comment in trick.comments %}
                        <div class="shadow mb-3">
                            <div class="px-3 py-2">
                                <p class="text-white-50 mb-0">
                                    <b>{{ comment.user }}</b> - {{ comment.createdAt|date('Y/m/d H:i')}}
                                </p>
                            </div>

                            <div class="p-3">
                                <p class="mb-0"><b>{{ comment.content }}</b></p>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <h2 class="text-center mt-3 mb-3">No comments found</h2>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
